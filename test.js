const test = require('ava')
const emoji = require('.')

test('get', t => {
  t.is(emoji.get('coffee'), '‚òï')
  t.is(emoji.get(':coffee:'), '‚òï')
})

test('which', t => {
  t.is(emoji.which('‚òï'), 'coffee')
  t.is(emoji.which('‚òï', { markdown: true }), ':coffee:')
  t.is(emoji.which('üëçüèæ'), '+1')
})

test('has', t => {
  t.true(emoji.has('‚òï'))
  t.true(emoji.has('coffee'))
  t.true(emoji.has(':coffee:'))
  t.false(emoji.has('idontexist'))
})

test('random', t => {
  const data = emoji.random()
  t.true(emoji.has(data.name))
  t.true(emoji.has(data.emoji))
})

test('replace', t => {
  t.is(emoji.replace('a ‚òï c', 'b'), 'a b c')
  t.is(emoji.replace('a üå≠ c', () => 'b'), 'a b c')
})

test('strip', t => {
  t.is(emoji.strip('a ‚òï c'), 'a c')
  t.is(emoji.strip('a ‚òï c', { removeSpaces: false }), 'a  c')
})

test('emojify', t => {
  t.is(emoji.emojify('a :coffee: c'), 'a ‚òï c')
  t.is(emoji.emojify('a :coffee: c :idontexist: d'), 'a ‚òï c  d')
})

test('unemojify', t => {
  t.is(emoji.unemojify('a ‚òï c'), 'a :coffee: c')
  t.is(emoji.unemojify('a ‚òï üå≠ c'), 'a :coffee: :hotdog: c')
})

test('search', t => {
  t.deepEqual(emoji.search('100'), [{ name: '100', emoji: 'üíØ' }])
})

test('find', t => {
  t.deepEqual(emoji.find('üíØ'), { name: '100', emoji: 'üíØ' })
  t.is(emoji.find('a'), undefined)
})

test('findAll', t => {
  t.deepEqual(emoji.findAll('I :heart: ‚òï and :pizza:!'), [
    {
      emoji: '‚ù§Ô∏è',
      name: 'heart'
    },
    {
      emoji: '‚òï',
      name: 'coffee'
    },
    {
      emoji: 'üçï',
      name: 'pizza'
    }
  ])
})
